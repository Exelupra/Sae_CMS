{% extends 'header.twig' %}

{% block title %}Article{% endblock %}

{% block content %}
    {% if isset == false %}
        <h2>Veuillez vous connecter pour créer un article</h2>
    {% else %}
        <h3><a href="{{ url_for('makeArticle') }}">Créer un articles</a></h3>
    {% endif %}
    <select id="categorie">
    {% for categorie in categories %}
        <option value="{{ categorie.id }}">{{ categorie.nom }}</option>
    {% endfor %}
    </select>
    {% for article in articles %}
        <div class="article">
            <h2>{{ article.titre }}</h2>
            <p>{{ article.resume }}</p>
            <p><a href="{{ url_for('articleById',{'id': article.id}) }}">Read more</a></p>
            
            {% if user.admin == 1 %}
                <form action="{{ url_for('deleteArticle',{'id':article.id}) }}" method="post">
                    <input type="hidden" name="id" value="article">
                    <input type="submit" value="Supprimer">
                </form>
                <form action="{{ url_for('togglePublish') }}" method="post">
                    <input type="hidden" name="id" value="{{ article.id }}">
                    <input type="hidden" name="page" value="article">
                    <input type="submit" value="Dépublier">
                </form>
            {% endif %}
        </div>
    {% endfor %}
    <script type="module" src="/../module/categoriesSelect.js"></script>
{% endblock %}